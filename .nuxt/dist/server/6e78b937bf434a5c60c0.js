exports.ids=[42],exports.modules={133:function(t,d){},188:function(t,d,e){"use strict";e.r(d);var c=e(133),n=e.n(c);for(var r in c)"default"!==r&&function(t){e.d(d,t,function(){return c[t]})}(r);d.default=n.a},220:function(t,d,e){"use strict";e.r(d);var c=e(2),n={layout:"user",data:()=>({loading:!0,isedit:!1,imageUrl:"",nickname:"",radio:"",sex:"",email:"",birthday:"",qqnumber:"",phone:"",weixinnumber:"",checkcode:"",imgToken:"",imgCode:"",access_token:"",head_portrait:"",realname_status:"",isheaderimgOK:!0}),mounted(){if(""==localStorage.getItem("userdata"))Object(c.a)().then(t=>{this.access_token=t,this.$axios.post("/me",{},{headers:{Authorization:"Bearer"+this.access_token}}).then(t=>{this.nickname=t.data.data.nickname,this.birthday=t.data.data.birth,this.qqnumber=t.data.data.qq_ID,this.weixinnumber=t.data.data.weixin_ID,this.email=t.data.data.email,this.sex=t.data.data.sex,this.phone=t.data.data.phone,this.head_portrait=t.data.data.head_portrait,this.realname_status=t.data.data.realname_status,this.loading=!1}).catch(t=>{})});else{let t=JSON.parse(localStorage.getItem("userdata"));this.nickname=t.nickname,this.birthday=t.birth,this.qqnumber=t.qq_ID,this.weixinnumber=t.weixin_ID,this.email=t.email,this.sex=t.sex,this.phone=t.phone,this.head_portrait=t.head_portrait,this.realname_status=t.realname_status,this.loading=!1}this.$axios.get("/getImgCode").then(t=>{this.imgToken=t.data.data.img_token,this.imgCode=t.data.data.img_code})},methods:{overedit(){if(""==this.checkcode)return this.$message({message:"验证码未填写",type:"warning"});if(0==this.isheaderimgOK)return this.$message({message:"头像正在上传,请稍后",type:"success"});Date.prototype.format=function(t){var d={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var e in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),d)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?d[e]:("00"+d[e]).substr((""+d[e]).length)));return t};var t=new Date(this.birthday).getTime();if(this.birthday=new Date(t).format("yyyy-MM-dd"),-1==this.qqnumber.search(/^[1-9][0-9]{4,10}$/))return this.$message.error("QQ号码格式错误");this.loading=!0,this.$axios.post("/saveInfo",{head_portrait:this.head_portrait,nickname:this.nickname,sex:this.radio||1,birth:this.birthday,qq_ID:this.qqnumber,weixin_ID:this.weixinnumber,imgCode:this.checkcode,imgToken:this.imgToken},{headers:{Authorization:"Bearer"+this.access_token}}).then(t=>{this.loading=!1,this.isedit=!1,this.$message({message:"修改成功",type:"success"}),this.sex=this.radio}).catch(t=>{this.loading=!1,this.$message.error("修改失败:"+t.response.data.message)})},editData(){this.isedit=!0,Object(c.a)().then(t=>{this.access_token=t})},handleAvatarSuccess(t,d){this.isheaderimgOK=!0,this.imageUrl=URL.createObjectURL(d.raw),this.head_portrait=t.data.path},beforeAvatarUpload(t){this.isheaderimgOK=!1},shuaxin(){this.$axios.get("/getImgCode").then(t=>{this.imgToken=t.data.data.img_token,this.imgCode=t.data.data.img_code})}}},r=e(1);var component=Object(r.a)(n,function(){var t=this,d=t.$createElement,e=t._self._c||d;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"personal"},[t._ssrNode('<div class="personalData" data-v-5d3dac8c><p class="actived"'+t._ssrStyle(null,null,{display:t.isedit?"none":""})+' data-v-5d3dac8c>个人资料</p> <p class="actived"'+t._ssrStyle(null,null,{display:t.isedit?"":"none"})+" data-v-5d3dac8c>编辑资料</p></div> "),t.isedit?t._e():t._ssrNode('<div class="userData" data-v-5d3dac8c>',"</div>",[t._ssrNode('<div data-v-5d3dac8c><div class="contentleft" data-v-5d3dac8c>头像:</div> <div class="contentright touxiang" data-v-5d3dac8c><div class="yuan" data-v-5d3dac8c><img'+t._ssrAttr("src",t.$store.state.header_img+t.head_portrait)+' alt data-v-5d3dac8c></div></div></div> <div data-v-5d3dac8c><div class="contentleft" data-v-5d3dac8c><span class="red" data-v-5d3dac8c>*</span>昵称:\n      </div> <div class="contentright" data-v-5d3dac8c>'+t._ssrEscape("\n        "+t._s(t.nickname)+"\n      ")+"</div></div> "),t._ssrNode("<div data-v-5d3dac8c>","</div>",[t._ssrNode('<div class="contentleft" data-v-5d3dac8c><span class="red" data-v-5d3dac8c>*</span>真实姓名:\n      </div> '),t._ssrNode('<div class="contentright smallsize" data-v-5d3dac8c>',"</div>",[t._ssrNode(1==t.realname_status?"<span data-v-5d3dac8c>"+t._ssrEscape(t._s(t.$store.state.userdata.truename))+"</span>":"\x3c!----\x3e"),0==t.realname_status?e("nuxt-link",{staticClass:"blue cr",attrs:{to:"/user/4-4",tag:"span"}},[t._v("未实名认证")]):t._e()],2)],2),t._ssrNode(' <div data-v-5d3dac8c><div class="contentleft" data-v-5d3dac8c>性别:</div> <div class="contentright smallsize" data-v-5d3dac8c>'+t._ssrEscape(t._s("2"==t.sex?"女":"男"))+"</div></div> "),t._ssrNode("<div data-v-5d3dac8c>","</div>",[t._ssrNode('<div class="contentleft" data-v-5d3dac8c>手机号:</div> <div class="contentright smallsize" data-v-5d3dac8c>'+t._ssrEscape(t._s(t.phone))+"</div>"),e("nuxt-link",{staticClass:"xiugai cr",attrs:{tag:"span",to:"/user/4-2"}},[t._v("修改")])],2),t._ssrNode(' <div data-v-5d3dac8c><div class="contentleft" data-v-5d3dac8c>邮箱:</div> <div class="contentright smallsize" data-v-5d3dac8c>'+t._ssrEscape(t._s(t.email))+'</div></div> <div data-v-5d3dac8c><div class="contentleft" data-v-5d3dac8c>出生日期:</div> <div class="contentright smallsize" data-v-5d3dac8c>'+t._ssrEscape(t._s(t.birthday))+'</div></div> <div data-v-5d3dac8c><div class="contentleft" data-v-5d3dac8c>QQ号码:</div> <div class="contentright smallsize" data-v-5d3dac8c>'+t._ssrEscape(t._s(t.qqnumber))+'</div></div> <div data-v-5d3dac8c><div class="contentleft" data-v-5d3dac8c>微信号:</div> <div class="contentright smallsize" data-v-5d3dac8c>'+t._ssrEscape(t._s(t.weixinnumber))+"</div></div> "),t._ssrNode('<div class="footer" data-v-5d3dac8c>',"</div>",[e("el-button",{staticStyle:{marginLeft:"200px"},attrs:{type:"primary"},on:{click:t.editData}},[t._v("编辑资料")])],1)],2),t._ssrNode(" "),t.isedit?t._ssrNode('<div class="personalDataContent" data-v-5d3dac8c>',"</div>",[t._ssrNode("<div data-v-5d3dac8c>","</div>",[t._ssrNode('<div class="contentleft" data-v-5d3dac8c>头像:</div> '),t._ssrNode('<div class="contentright touxiang" data-v-5d3dac8c>',"</div>",[t._ssrNode("<div data-v-5d3dac8c>","</div>",[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.$store.state.imgcodehost+"/uploadImg",headers:{Authorization:"Bearer"+t.access_token},data:{upload_type:"head_portrait"},"show-file-list":!1,name:"image","on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?e("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"},[t._v("点击上传")])])],1),t._ssrNode(' <div class="uploaderp" data-v-5d3dac8c>支持大小不超过2M的jps,png图片</div>')],2)],2),t._ssrNode(" "),t._ssrNode("<div data-v-5d3dac8c>","</div>",[t._ssrNode('<div class="contentleft" data-v-5d3dac8c><span class="red" data-v-5d3dac8c>*</span>昵称:\n      </div> '),t._ssrNode('<div class="contentright" data-v-5d3dac8c>',"</div>",[e("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:t.nickname,callback:function(d){t.nickname=d},expression:"nickname"}})],1)],2),t._ssrNode(" "),t._ssrNode("<div data-v-5d3dac8c>","</div>",[t._ssrNode('<div class="contentleft" data-v-5d3dac8c>性别:</div> '),t._ssrNode('<div class="contentright smallsize" data-v-5d3dac8c>',"</div>",[[e("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(d){t.radio=d},expression:"radio"}},[t._v("男")]),t._ssrNode(" "),e("el-radio",{attrs:{label:"2"},model:{value:t.radio,callback:function(d){t.radio=d},expression:"radio"}},[t._v("女")])]],2)],2),t._ssrNode(" "),t._ssrNode("<div data-v-5d3dac8c>","</div>",[t._ssrNode('<div class="contentleft" data-v-5d3dac8c><span class="red" data-v-5d3dac8c>*</span>手机号:\n      </div> <div class="contentright smallsize" data-v-5d3dac8c>'+t._ssrEscape(t._s(t.phone))+"</div>"),e("nuxt-link",{staticClass:"xiugai",attrs:{tag:"span",to:"/user/4-2"}},[t._v("修改")])],2),t._ssrNode(' <div data-v-5d3dac8c><div class="contentleft" data-v-5d3dac8c><span class="red" data-v-5d3dac8c>*</span>邮箱:\n      </div> <div class="contentright smallsize" data-v-5d3dac8c>'+t._ssrEscape(t._s(t.email))+"</div></div> "),t._ssrNode("<div data-v-5d3dac8c>","</div>",[t._ssrNode('<div class="contentleft" data-v-5d3dac8c>出生日期:</div> '),t._ssrNode('<div class="contentright smallsize" data-v-5d3dac8c>',"</div>",[e("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.birthday,callback:function(d){t.birthday=d},expression:"birthday"}})],1)],2),t._ssrNode(" "),t._ssrNode("<div data-v-5d3dac8c>","</div>",[t._ssrNode('<div class="contentleft" data-v-5d3dac8c>QQ号码:</div> '),t._ssrNode('<div class="contentright smallsize" data-v-5d3dac8c>',"</div>",[e("el-input",{attrs:{maxlength:"15",placeholder:"请设置QQ号码"},model:{value:t.qqnumber,callback:function(d){t.qqnumber=d},expression:"qqnumber"}})],1)],2),t._ssrNode(" "),t._ssrNode("<div data-v-5d3dac8c>","</div>",[t._ssrNode('<div class="contentleft" data-v-5d3dac8c>微信号:</div> '),t._ssrNode('<div class="contentright smallsize" data-v-5d3dac8c>',"</div>",[e("el-input",{attrs:{maxlength:"20",placeholder:"请设置微信号"},model:{value:t.weixinnumber,callback:function(d){t.weixinnumber=d},expression:"weixinnumber"}})],1)],2),t._ssrNode(" "),t._ssrNode("<div data-v-5d3dac8c>","</div>",[t._ssrNode('<div class="contentleft" data-v-5d3dac8c><span class="red" data-v-5d3dac8c>*</span>验证码:\n      </div> '),t._ssrNode('<div class="contentright smallsize" data-v-5d3dac8c>',"</div>",[e("el-input",{attrs:{maxlength:"8",placeholder:"请输入验证码"},model:{value:t.checkcode,callback:function(d){t.checkcode=d},expression:"checkcode"}})],1),t._ssrNode(' <div style="margin:-7px 0 0 10px" data-v-5d3dac8c><img'+t._ssrAttr("src",t.imgCode)+' alt="点击刷新" data-v-5d3dac8c></div>')],2),t._ssrNode(" "),t._ssrNode('<div class="footer" style="margin-top:0" data-v-5d3dac8c>',"</div>",[e("el-button",{staticStyle:{margin:"40px 71px 0 250px"},attrs:{type:"primary"},on:{click:t.overedit}},[t._v("编辑完成")]),t._ssrNode(" "),e("el-button",{staticStyle:{margin:"40px 71px 0 0"},on:{click:function(d){t.isedit=!1}}},[t._v("取消")])],2)],2):t._e()],2)},[],!1,function(t){var d=e(188);d.__inject__&&d.__inject__(t)},"5d3dac8c","30f356ab");d.default=component.exports}};
//# sourceMappingURL=6e78b937bf434a5c60c0.js.map