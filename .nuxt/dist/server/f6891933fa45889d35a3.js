exports.ids=[42],exports.modules={130:function(e,t){},184:function(e,t,d){"use strict";d.r(t);var n=d(130),r=d.n(n);for(var o in n)"default"!==o&&function(e){d.d(t,e,function(){return n[e]})}(o);t.default=r.a},216:function(e,t,d){"use strict";d.r(t);var n=d(2),r={layout:"user",data:()=>({loading:!0,isedit:!1,imageUrl:"",nickname:"",radio:"",sex:"",email:"",birthday:"",qqnumber:"",phone:"",weixinnumber:"",checkcode:"",imgToken:"",imgCode:"",access_token:"",head_portrait:"",realname_status:"",isheaderimgOK:!0}),mounted(){if(""==localStorage.getItem("userdata"))Object(n.a)().then(e=>{this.access_token=e,this.$axios.post("/me",{},{headers:{Authorization:"Bearer"+this.access_token}}).then(e=>{this.nickname=e.data.data.nickname,this.birthday=e.data.data.birth,this.qqnumber=e.data.data.qq_ID,this.weixinnumber=e.data.data.weixin_ID,this.email=e.data.data.email,this.sex=e.data.data.sex,this.phone=e.data.data.phone,this.head_portrait=e.data.data.head_portrait,this.realname_status=e.data.data.realname_status,this.loading=!1}).catch(e=>{})});else{let e=JSON.parse(localStorage.getItem("userdata"));this.nickname=e.nickname,this.birthday=e.birth,this.qqnumber=e.qq_ID,this.weixinnumber=e.weixin_ID,this.email=e.email,this.sex=e.sex,this.phone=e.phone,this.head_portrait=e.head_portrait,this.realname_status=e.realname_status,this.loading=!1}this.$axios.get("/getImgCode").then(e=>{this.imgToken=e.data.data.img_token,this.imgCode=e.data.data.img_code})},methods:{overedit(){if(""==this.checkcode)return this.$message({message:"验证码未填写",type:"warning"});if(0==this.isheaderimgOK)return this.$message({message:"头像正在上传,请稍后",type:"success"});Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var d in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+d+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[d]:("00"+t[d]).substr((""+t[d]).length)));return e};var e=new Date(this.birthday).getTime();if(this.birthday=new Date(e).format("yyyy-MM-dd"),-1==this.qqnumber.search(/^[1-9][0-9]{4,10}$/))return this.$message.error("QQ号码格式错误");this.loading=!0,this.$axios.post("/saveInfo",{head_portrait:this.head_portrait,nickname:this.nickname,sex:this.radio||1,birth:this.birthday,qq_ID:this.qqnumber,weixin_ID:this.weixinnumber,imgCode:this.checkcode,imgToken:this.imgToken},{headers:{Authorization:"Bearer"+this.access_token}}).then(e=>{this.loading=!1,this.isedit=!1,this.$message({message:"修改成功",type:"success"}),this.sex=this.radio}).catch(e=>{this.loading=!1,this.$message.error("修改失败:"+e.response.data.message)})},editData(){this.isedit=!0,Object(n.a)().then(e=>{this.access_token=e})},handleAvatarSuccess(e,t){this.isheaderimgOK=!0,this.imageUrl=URL.createObjectURL(t.raw),this.head_portrait=e.data.path},beforeAvatarUpload(e){this.isheaderimgOK=!1},shuaxin(){this.$axios.get("/getImgCode").then(e=>{this.imgToken=e.data.data.img_token,this.imgCode=e.data.data.img_code})}}},o=d(1);var component=Object(o.a)(r,function(){var e=this,t=e.$createElement,d=e._self._c||t;return d("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"personal"},[e._ssrNode('<div class="personalData" data-v-37fef823><p class="actived"'+e._ssrStyle(null,null,{display:e.isedit?"none":""})+' data-v-37fef823>个人资料</p> <p class="actived"'+e._ssrStyle(null,null,{display:e.isedit?"":"none"})+" data-v-37fef823>编辑资料</p></div> "),e.isedit?e._e():e._ssrNode('<div class="userData" data-v-37fef823>',"</div>",[e._ssrNode('<div data-v-37fef823><div class="contentleft" data-v-37fef823>头像:</div> <div class="contentright touxiang" data-v-37fef823><div data-v-37fef823><img'+e._ssrAttr("src",e.$store.state.header_img+e.head_portrait)+' alt data-v-37fef823></div></div></div> <div data-v-37fef823><div class="contentleft" data-v-37fef823><span class="red" data-v-37fef823>*</span>昵称:\n      </div> <div class="contentright" data-v-37fef823>'+e._ssrEscape("\n        "+e._s(e.nickname)+"\n      ")+"</div></div> "),e._ssrNode("<div data-v-37fef823>","</div>",[e._ssrNode('<div class="contentleft" data-v-37fef823><span class="red" data-v-37fef823>*</span>真实姓名:\n      </div> '),e._ssrNode('<div class="contentright smallsize" data-v-37fef823>',"</div>",[e._ssrNode(1==e.realname_status?"<span data-v-37fef823>"+e._ssrEscape(e._s(e.$store.state.userdata.truename))+"</span>":"\x3c!----\x3e"),0==e.realname_status?d("nuxt-link",{staticClass:"blue cr",attrs:{to:"/user/4-4",tag:"span"}},[e._v("未实名认证")]):e._e()],2)],2),e._ssrNode(' <div data-v-37fef823><div class="contentleft" data-v-37fef823>性别:</div> <div class="contentright smallsize" data-v-37fef823>'+e._ssrEscape(e._s("2"==e.sex?"女":"男"))+"</div></div> "),e._ssrNode("<div data-v-37fef823>","</div>",[e._ssrNode('<div class="contentleft" data-v-37fef823>手机号:</div> <div class="contentright smallsize" data-v-37fef823>'+e._ssrEscape(e._s(e.phone))+"</div>"),d("nuxt-link",{staticClass:"xiugai cr",attrs:{tag:"span",to:"/user/4-2"}},[e._v("修改")])],2),e._ssrNode(' <div data-v-37fef823><div class="contentleft" data-v-37fef823>邮箱:</div> <div class="contentright smallsize" data-v-37fef823>'+e._ssrEscape(e._s(e.email))+'</div></div> <div data-v-37fef823><div class="contentleft" data-v-37fef823>出生日期:</div> <div class="contentright smallsize" data-v-37fef823>'+e._ssrEscape(e._s(e.birthday))+'</div></div> <div data-v-37fef823><div class="contentleft" data-v-37fef823>QQ号码:</div> <div class="contentright smallsize" data-v-37fef823>'+e._ssrEscape(e._s(e.qqnumber))+'</div></div> <div data-v-37fef823><div class="contentleft" data-v-37fef823>微信号:</div> <div class="contentright smallsize" data-v-37fef823>'+e._ssrEscape(e._s(e.weixinnumber))+"</div></div> "),e._ssrNode('<div class="footer" data-v-37fef823>',"</div>",[d("el-button",{staticStyle:{marginLeft:"200px"},attrs:{type:"primary"},on:{click:e.editData}},[e._v("编辑资料")])],1)],2),e._ssrNode(" "),e.isedit?e._ssrNode('<div class="personalDataContent" data-v-37fef823>',"</div>",[e._ssrNode("<div data-v-37fef823>","</div>",[e._ssrNode('<div class="contentleft" data-v-37fef823>头像:</div> '),e._ssrNode('<div class="contentright touxiang" data-v-37fef823>',"</div>",[e._ssrNode("<div data-v-37fef823>","</div>",[d("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$store.state.imgcodehost+"/uploadImg",headers:{Authorization:"Bearer"+e.access_token},data:{upload_type:"head_portrait"},"show-file-list":!1,name:"image","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?d("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):d("i",{staticClass:"el-icon-plus avatar-uploader-icon"},[e._v("点击上传")])])],1),e._ssrNode(' <div class="uploaderp" data-v-37fef823>支持大小不超过2M的jps,png图片</div>')],2)],2),e._ssrNode(" "),e._ssrNode("<div data-v-37fef823>","</div>",[e._ssrNode('<div class="contentleft" data-v-37fef823><span class="red" data-v-37fef823>*</span>昵称:\n      </div> '),e._ssrNode('<div class="contentright" data-v-37fef823>',"</div>",[d("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1)],2),e._ssrNode(" "),e._ssrNode("<div data-v-37fef823>","</div>",[e._ssrNode('<div class="contentleft" data-v-37fef823>性别:</div> '),e._ssrNode('<div class="contentright smallsize" data-v-37fef823>',"</div>",[[d("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("男")]),e._ssrNode(" "),d("el-radio",{attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("女")])]],2)],2),e._ssrNode(" "),e._ssrNode("<div data-v-37fef823>","</div>",[e._ssrNode('<div class="contentleft" data-v-37fef823><span class="red" data-v-37fef823>*</span>手机号:\n      </div> <div class="contentright smallsize" data-v-37fef823>'+e._ssrEscape(e._s(e.phone))+"</div>"),d("nuxt-link",{staticClass:"xiugai",attrs:{tag:"span",to:"/user/4-2"}},[e._v("修改")])],2),e._ssrNode(' <div data-v-37fef823><div class="contentleft" data-v-37fef823><span class="red" data-v-37fef823>*</span>邮箱:\n      </div> <div class="contentright smallsize" data-v-37fef823>'+e._ssrEscape(e._s(e.email))+"</div></div> "),e._ssrNode("<div data-v-37fef823>","</div>",[e._ssrNode('<div class="contentleft" data-v-37fef823>出生日期:</div> '),e._ssrNode('<div class="contentright smallsize" data-v-37fef823>',"</div>",[d("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.birthday,callback:function(t){e.birthday=t},expression:"birthday"}})],1)],2),e._ssrNode(" "),e._ssrNode("<div data-v-37fef823>","</div>",[e._ssrNode('<div class="contentleft" data-v-37fef823>QQ号码:</div> '),e._ssrNode('<div class="contentright smallsize" data-v-37fef823>',"</div>",[d("el-input",{attrs:{maxlength:"15",placeholder:"请设置QQ号码"},model:{value:e.qqnumber,callback:function(t){e.qqnumber=t},expression:"qqnumber"}})],1)],2),e._ssrNode(" "),e._ssrNode("<div data-v-37fef823>","</div>",[e._ssrNode('<div class="contentleft" data-v-37fef823>微信号:</div> '),e._ssrNode('<div class="contentright smallsize" data-v-37fef823>',"</div>",[d("el-input",{attrs:{maxlength:"20",placeholder:"请设置微信号"},model:{value:e.weixinnumber,callback:function(t){e.weixinnumber=t},expression:"weixinnumber"}})],1)],2),e._ssrNode(" "),e._ssrNode("<div data-v-37fef823>","</div>",[e._ssrNode('<div class="contentleft" data-v-37fef823><span class="red" data-v-37fef823>*</span>验证码:\n      </div> '),e._ssrNode('<div class="contentright smallsize" data-v-37fef823>',"</div>",[d("el-input",{attrs:{maxlength:"8",placeholder:"请输入验证码"},model:{value:e.checkcode,callback:function(t){e.checkcode=t},expression:"checkcode"}})],1),e._ssrNode(' <div style="margin:-7px 0 0 10px" data-v-37fef823><img'+e._ssrAttr("src",e.imgCode)+' alt="点击刷新" data-v-37fef823></div>')],2),e._ssrNode(" "),e._ssrNode('<div class="footer" style="margin-top:0" data-v-37fef823>',"</div>",[d("el-button",{staticStyle:{margin:"40px 71px 0 250px"},attrs:{type:"primary"},on:{click:e.overedit}},[e._v("编辑完成")]),e._ssrNode(" "),d("el-button",{staticStyle:{margin:"40px 71px 0 0"},on:{click:function(t){e.isedit=!1}}},[e._v("取消")])],2)],2):e._e()],2)},[],!1,function(e){var t=d(184);t.__inject__&&t.__inject__(e)},"37fef823","30f356ab");t.default=component.exports}};
//# sourceMappingURL=f6891933fa45889d35a3.js.map