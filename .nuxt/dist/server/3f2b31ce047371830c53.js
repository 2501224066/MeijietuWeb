exports.ids=[52],exports.modules={139:function(t,e){},210:function(t,e,n){"use strict";n.r(e);var d=n(139),r=n.n(d);for(var o in d)"default"!==o&&function(t){n.d(e,t,function(){return d[t]})}(o);e.default=r.a},290:function(t,e,n){"use strict";n.r(e);n(2);var d={layout:"user",data:()=>({currentPage:1,istruefukuan:!1,shanghcuanbtn:!1,fukuanindent:"",dialogVisible:!1,loading:!0,indent_num:"",indentdata:"",token:"",indentclass:1,indentlist:[],indentstatus0:[],indentstatus1:[],indentstatus4:[],indentstatus7:[],indentstatus8:[],indentstatus10:[],cancel_cause:"",cancel_status:"",cancel_indent:"",gengxin_status:1,btnwait:!1}),mounted(){this.$axios.post("/indentBelongSelf",{},{headers:{Authorization:"Bearer"+this.$store.state.token}}).then(t=>{this.indentdata=t.data.data,this.indentlist=t.data.data.data,this.indentlist.forEach(t=>{0==t.status?this.indentstatus0.push(t):1==t.status?this.indentstatus1.push(t):4==t.status?this.indentstatus4.push(t):7==t.status?this.indentstatus7.push(t):8==t.status&&9==t.status?this.indentstatus8.push(t):this.indentstatus10.push(t)}),this.loading=!1,this.token=localStorage.getItem("access_token")}).catch(t=>{gengxin(1),this.token=localStorage.getItem("access_token"),this.loading=!1})},methods:{gengxin(a){this.loading=!0,a||(this.currentPage=1),this.$axios.post("/indentBelongSelf?page="+a,{},{headers:{Authorization:"Bearer"+localStorage.getItem("access_token")}}).then(t=>{this.indentdata=t.data.data,this.indentlist=t.data.data.data,this.indentlist.forEach(t=>{0==t.status?this.indentstatus0.push(t):1==t.status?this.indentstatus1.push(t):4==t.status?this.indentstatus4.push(t):7==t.status?this.indentstatus7.push(t):8==t.status&&9==t.status?this.indentstatus8.push(t):this.indentstatus10.push(t)}),this.loading=!1}).catch(t=>{this.loading=!1})},kefu(){window.open("https://wpa.qq.com/msgrd?v=3&uin="+JSON.parse(localStorage.getItem("salesman")).salesman_qq_ID+"&site=qq&menu=yes")},handleAvatarSuccess(t,e){this.$axios.post("/addDemandFile",{indent_num:this.indent_num,demand_file:t.data.path},{headers:{Authorization:"Bearer"+localStorage.getItem("access_token")}}).then(t=>{this.$axios.post("/indentBelongSelf",{},{headers:{Authorization:"Bearer"+localStorage.getItem("access_token")}}).then(t=>{this.indentdata=t.data.data,this.indentlist=t.data.data.data,this.indentlist.forEach(t=>{0==t.status?this.indentstatus0.push(t):1==t.status?this.indentstatus1.push(t):4==t.status?this.indentstatus4.push(t):7==t.status?this.indentstatus7.push(t):8==t.status||9==t.status?this.indentstatus8.push(t):this.indentstatus1.push(t)}),this.loading=!1}).catch(t=>{this.loading=!1}),this.$message({message:"上传成功",type:"success"})}).catch(t=>{this.loading=!1,this.$message.error("上传失败:"+t.response.data.message)})},handleCurrentChange(a){this.loading=!0,this.gengxin(a)},upload(a,b){return""!==b?this.$message({message:"只能上传一次",type:"warning"}):this.btnwait?this.$message({message:"操作太频繁,请稍后",type:"warning"}):void window.open("/user/2-3/"+a)},beforeAvatarUpload(){this.loading=!0,this.token=localStorage.getItem("access_token"),this.shanghcuanbtn=!1},oderCancel(a,b){if(this.btnwait)return this.$message({message:"操作太频繁,请稍后",type:"warning"});this.cancel_status=b,this.cancel_indent=a,this.dialogVisible=!0,console.log(a,b)},istrueshanchu(a,b){if(this.btnwait)return this.$message({message:"操作太频繁,请稍后",type:"warning"});this.btnwait=!0,0==b?this.$axios.post("/deleteIndentBeforePayment",{indent_num:a},{headers:{Authorization:"Bearer"+localStorage.getItem("access_token")}}).then(t=>{this.$message({message:"删除成功",type:"success"}),this.gengxin_status+=1,this.loading=!1,this.btnwait=!1}).catch(t=>{this.$message.error("失败:"+t.response.data.message),this.loading=!1,this.btnwait=!1}):(this.$message.error("订单状态错误"),this.btnwait=!1)},istrueCancal(){return this.btnwait?this.$message({message:"操作太频繁,请稍后",type:"warning"}):(this.btnwait=!0,setTimeout(()=>{this.btnwait=!1},3e3),this.dialogVisible=!1,this.loading=!0,1!==this.$store.state.userdata.identity?console.log("用户身份错误"+this.$store.state.userdata.identity):void(1==this.cancel_status?this.$axios.post("/acceptIndentBeforeCancel",{indent_num:this.cancel_indent,cancel_cause:this.cancel_cause},{headers:{Authorization:"Bearer"+localStorage.getItem("access_token")}}).then(t=>{this.$message({message:"取消成功",type:"success"}),this.gengxin_status+=1,this.loading=!1}).catch(t=>{this.$message.error("失败:"+t.response.data.message),this.loading=!1}):4==this.cancel_status?this.$axios.post("/inTransactionBuyerCancel",{indent_num:this.cancel_indent,cancel_cause:this.cancel_cause},{headers:{Authorization:"Bearer"+localStorage.getItem("access_token")}}).then(t=>{this.$message({message:"取消成功",type:"success"}),this.gengxin_status+=1,this.loading=!1}).catch(t=>{this.$message.error("失败:"+t.response.data.message),this.loading=!1}):(this.loading=!1,this.$message.error("订单状态错误"+this.cancel_status))))},buyerConfirmComplete(a){if(this.btnwait)return this.$message({message:"操作太频繁,请稍后",type:"warning"});this.btnwait=!0,this.loading=!0,this.$axios.post("/buyerConfirmComplete",{indent_num:a},{headers:{Authorization:"Bearer"+localStorage.getItem("access_token")}}).then(t=>{this.$message({message:"确定成功",type:"success"}),this.gengxin_status+=1,this.loading=!1,this.btnwait=!1}).catch(t=>{this.loading=!1,this.btnwait=!1})},indentPayment(a){if(this.btnwait)return this.$message({message:"操作太频繁,请稍后",type:"warning"});this.btnwait=!0,this.loading=!0,this.istruefukuan=!1,this.$axios.post("/indentPayment",{indent_num:a},{headers:{Authorization:"Bearer"+localStorage.getItem("access_token")}}).then(t=>{this.$message({message:"付款成功",type:"success"}),this.gengxin_status+=1,this.loading=!1,this.btnwait=!1}).catch(t=>{if(this.$message.error("付款失败:"+t.response.data.message),this.btnwait=!1,"钱包余额不足"==t.response.data.message)return this.$router.push("/user/3-2");this.loading=!1})},achievements_file(a){let t=this.indentdata.data[a].achievements_file;if(""==t)return this.$message({message:"媒体主还未上传",type:"warning"});window.open(this.$store.state.header_img+t)}},watch:{gengxin_status:function(){this.gengxin()}}},r=n(1);var component=Object(r.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"Order",attrs:{"element-loading-background":"rgba(255, 2555, 255, 1)"}},[t._ssrNode('<div class="Orderheader" data-v-1418f808>',"</div>",[t._ssrNode("<p"+t._ssrClass(null,1==t.indentclass?"actived":"")+" data-v-1418f808>全部订单</p> <p"+t._ssrClass(null,2==t.indentclass?"actived":"")+" data-v-1418f808>失效订单</p> <p"+t._ssrClass(null,3==t.indentclass?"actived":"")+" data-v-1418f808>待付款</p> <p"+t._ssrClass(null,4==t.indentclass?"actived":"")+" data-v-1418f808>待接单</p> <p"+t._ssrClass(null,5==t.indentclass?"actived":"")+" data-v-1418f808>执行中</p> <p"+t._ssrClass(null,6==t.indentclass?"actived":"")+" data-v-1418f808>审核中</p> <p"+t._ssrClass(null,7==t.indentclass?"actived":"")+" data-v-1418f808>已完成</p> "),n("el-button",{staticClass:"fr lianxi",attrs:{type:"primary"},on:{click:t.kefu}},[t._v("联系客服")])],2),t._ssrNode(" "),t._ssrNode('<div class="Orderth" data-v-1418f808>',"</div>",[n("el-row",[n("el-col",{attrs:{span:9}},[n("p",[t._v("订单详情")])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("p",[t._v("价格")])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("p",[t._v("数量")])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("p",[t._v("订单状态")])]),t._v(" "),n("el-col",{attrs:{span:5}},[n("p",[t._v("订单操作")])])],1)],1),t._ssrNode(" "),t._l(t.indentlist,function(e,d){return t._ssrNode('<div class="Orderlist" data-v-1418f808>',"</div>",[t._ssrNode('<div class="listheader" data-v-1418f808><span data-v-1418f808>'+t._ssrEscape(t._s(e.create_time))+'</span> <span style="marginLeft:16px;color:#242424" data-v-1418f808>'+t._ssrEscape("订单号:"+t._s(e.indent_num))+"</span></div> "),t._ssrNode('<div class="Orderlistcontent" data-v-1418f808>',"</div>",[n("el-row",[n("el-col",{attrs:{span:9}},[n("img",{staticStyle:{width:"98px","border-radius":"50%"},attrs:{src:t.$store.state.header_img+e.indent_item.avatar_url}}),t._v(" "),n("div",{staticStyle:{width:"160px"}},[n("h3",{staticClass:"shopname"},[n("span",[t._v(t._s(e.indent_item.modular_name))]),t._v("\n              "+t._s(e.indent_item.goods_title)+"\n            ")]),t._v(" "),n("p",[t._v("所属分类:"+t._s(e.indent_item.theme_name))]),t._v(" "),n("p",[t._v("媒体领域:综合")])])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("p",[t._v("\n            "+t._s(e.indent_item.priceclassify_name)+":\n            "),n("span",{staticClass:"red"},[t._v(t._s(e.indent_item.goods_price))])])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("p",[t._v(t._s(e.indent_item.goods_count))])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("p",[t._v(t._s(0==e.status?"待付款":1==e.status?"待接单":4==e.status?"执行中":7==e.status?"审核中":8==e.status?"已完成":"已失效"))])])],1)],1),t._ssrNode(" "+(0==e.status?'<div class="selectbtn" data-v-1418f808>'+(""===e.demand_file?"<p data-v-1418f808>上传需求文档</p>":"\x3c!----\x3e")+" "+(""!==e.demand_file?'<p class="cr" data-v-1418f808>去付款</p>':"\x3c!----\x3e")+' <p class="quxiao" data-v-1418f808>删除订单</p></div>':"\x3c!----\x3e")+" "+(1==e.status?'<div class="selectbtn" data-v-1418f808><span data-v-1418f808>等待媒体主接单</span> <p class="quxiao" data-v-1418f808>取消订单</p></div>':"\x3c!----\x3e")+" "+(4==e.status?'<div class="selectbtn" data-v-1418f808><span data-v-1418f808>等待完成</span> <p class="quxiao red" data-v-1418f808>取消订单</p></div>':"\x3c!----\x3e")+" "+(7==e.status?'<div class="selectbtn" data-v-1418f808><p data-v-1418f808>下载完成信息</p> <p data-v-1418f808>确认完成</p></div>':"\x3c!----\x3e"))],2)}),t._ssrNode(" "),t._ssrNode('<div class="noindent"'+t._ssrStyle(null,null,{display:0==t.indentlist.length?"":"none"})+" data-v-1418f808>","</div>",[t._ssrNode('<p class="font14 color666" data-v-1418f808><i class="el-icon-warning" style="margin-right:8px" data-v-1418f808></i>没有订单，去你挑选需要的媒体吧~</p> '),n("nuxt-link",{attrs:{to:"/",tag:"div"}},[t._v("去首页逛逛")])],2),t._ssrNode(" "),t._ssrNode('<div class="fenye"'+t._ssrStyle(null,null,{display:0!==t.indentlist.length?"":"none"})+" data-v-1418f808>","</div>",[n("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":15,layout:"prev, pager, next, jumper",total:this.indentdata.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1),t._ssrNode(" "),n("el-dialog",{attrs:{title:"取消原因",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("p",{directives:[{name:"show",rawName:"v-show",value:1!==t.cancel_status,expression:"cancel_status!==1"}],staticClass:"red",staticStyle:{"margin-top":"-20px"}},[t._v("取消订单将扣除保证金!")]),t._v(" "),n("el-input",{attrs:{type:"textarea",resize:"none",rows:3,placeholder:"请输入内容"},model:{value:t.cancel_cause,callback:function(e){t.cancel_cause=e},expression:"cancel_cause"}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.istrueCancal}},[t._v("确 定")]),t._v(" "),n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1),t._ssrNode(" "),n("el-dialog",{attrs:{title:"提示",visible:t.istruefukuan,width:"30%"},on:{"update:visible":function(e){t.istruefukuan=e}}},[n("span",[t._v("确认付款")]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.indentPayment(t.fukuanindent)}}},[t._v("确 定")]),t._v(" "),n("el-button",{on:{click:function(e){t.istruefukuan=!1}}},[t._v("取 消")])],1)])],2)},[],!1,function(t){var e=n(210);e.__inject__&&e.__inject__(t)},"1418f808","71b23fae");e.default=component.exports}};
//# sourceMappingURL=3f2b31ce047371830c53.js.map