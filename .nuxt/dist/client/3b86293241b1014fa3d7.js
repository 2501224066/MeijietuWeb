(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{372:function(e,t,n){},443:function(e,t,n){"use strict";var o=n(372);n.n(o).a},524:function(e,t,n){"use strict";n.r(t);n(172);var o=n(7),c={layout:"user",data:function(){return{iswait:!1,waittime:60,phone:"",smsCode:"",new_phone:"",new_phone_confirmation:""}},methods:{checkImgCode:function(){var e=this;if(-1==this.phone.search(/^1[3456789]\d{9}$/))return this.$message.error("手机号输入错误");this.$axios.get("/smsVerifCode",{params:{phone:this.phone,code_type:"savePhone"}}).then(function(t){e.iswait=!0;var n=setInterval(function(){0==e.waittime&&(e.iswait=!1,e.waittime=60,clearInterval(n)),e.waittime-=1},1e3);e.$message({message:"短信发送成功,请等待",type:"success"})}).catch(function(t){e.$message.error(t.response.data.message)})},savephone:function(){var e=this;return-1==this.new_phone.search(/^1[3456789]\d{9}$/)?this.$message.error("新手机号输入格式错误"):this.new_phone!=this.new_phone_confirmation?this.$message.error("两次次输入手机号不相同"):void Object(o.b)().then(function(t){e.$axios.post("/savePhone",{phone:e.phone,smsCode:e.smsCode,new_phone:e.new_phone,new_phone_confirmation:e.new_phone_confirmation},{headers:{Authorization:"Bearer"+t}}).then(function(t){e.$message({message:"修改成功",type:"success"})}).catch(function(t){e.$message.error("修改失败:"+t.response.data.message)})})}}},r=(n(443),n(2)),component=Object(r.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"changePhone"},[e._m(0),e._v(" "),n("div",{staticClass:"changecontent"},[n("div",[n("div",{staticClass:"contentleft"},[e._v("手机号码 :")]),e._v(" "),n("div",{staticClass:"contentright"},[n("el-input",{attrs:{maxlength:"15",placeholder:"请输入手机号码"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)]),e._v(" "),n("div",[n("div",{staticClass:"contentleft"},[e._v("短信验证码 :")]),e._v(" "),n("div",{staticClass:"contentright"},[n("el-input",{staticStyle:{width:"200px"},attrs:{maxlength:"8",placeholder:"请输入短信验证码"},model:{value:e.smsCode,callback:function(t){e.smsCode=t},expression:"smsCode"}}),e._v(" "),n("el-button",{attrs:{disabled:e.iswait},on:{click:e.checkImgCode}},[e._v(e._s(e.iswait?"等待"+e.waittime+"s":"发送验证码"))])],1)]),e._v(" "),n("div",[n("div",{staticClass:"contentleft"},[e._v("新手机号码 :")]),e._v(" "),n("div",{staticClass:"contentright"},[n("el-input",{attrs:{maxlength:"15",placeholder:"请输入新手机号码"},model:{value:e.new_phone,callback:function(t){e.new_phone=t},expression:"new_phone"}})],1)]),e._v(" "),n("div",[n("div",{staticClass:"contentleft"},[e._v("确认手机号码 :")]),e._v(" "),n("div",{staticClass:"contentright"},[n("el-input",{attrs:{maxlength:"15",placeholder:"请再次输入新手机号码"},model:{value:e.new_phone_confirmation,callback:function(t){e.new_phone_confirmation=t},expression:"new_phone_confirmation"}})],1)]),e._v(" "),n("div",[n("el-button",{staticStyle:{margin:"31px 71px 0 217px",width:"108px"},attrs:{type:"primary"},on:{click:e.savephone}},[e._v("保存")])],1)])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"changeheader"},[t("p",{staticClass:"actived"},[this._v("修改手机号")])])}],!1,null,"2f94b69c",null);t.default=component.exports}}]);