(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{360:function(t,e,n){},424:function(t,e,n){"use strict";var o=n(360);n.n(o).a},473:function(t,e,n){"use strict";n.r(e);n(172);var o=n(7),r={layout:"user",data:function(){return{iswait:!1,waittime:60,password:"",smsCode:"",new_pass:"",new_pass_confirmation:""}},methods:{checkImgCode:function(){var t=this;return""==this.password?this.$message.error("请输入当前密码"):-1==this.password.search(/^[0-9a-zA-Z]+$/)?this.$message.error("密码格式输入错误"):void this.$axios.get("/smsVerifCode",{params:{phone:this.$store.state.userdata.phone,code_type:"savePass"}}).then(function(e){t.iswait=!0;var n=setInterval(function(){0==t.waittime&&(t.iswait=!1,t.waittime=60,clearInterval(n)),t.waittime-=1},1e3);t.$message({message:"短信发送成功,请等待",type:"success"})}).catch(function(e){t.$message.error(e.response.data.message)})},changepassword:function(){var t=this;return-1==this.password.search(/^[0-9a-zA-Z]+$/)?this.$message.error("密码格式输入错误"):-1==this.new_pass.search(/^[0-9a-zA-Z]+$/)?this.$message.error("密码格式输入错误"):this.new_pass!=this.new_pass_confirmation?this.$message.error("两次密码输入不一致"):void Object(o.b)().then(function(e){return t.$axios.post("/savePass",{password:t.password,smsCode:t.smsCode,new_pass:t.new_pass,new_pass_confirmation:t.new_pass_confirmation},{headers:{Authorization:"Bearer"+e}})}).then(function(e){t.$message({message:"修改成功",type:"success"}),setTimeout(function(){t.$router.push("/user")},2e3)}).catch(function(e){t.$message.error("失败:"+e.response.data.message)})}}},c=(n(424),n(2)),component=Object(c.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"changePassword"},[t._m(0),t._v(" "),n("div",{staticClass:"changecontent"},[n("div",[n("div",{staticClass:"contentleft"},[t._v("当前密码 :")]),t._v(" "),n("div",{staticClass:"contentright"},[n("el-input",{attrs:{"show-password":"",maxlength:"15",placeholder:"请输入当前密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)]),t._v(" "),n("div",[n("div",{staticClass:"contentleft"},[t._v("短信验证码 :")]),t._v(" "),n("div",{staticClass:"contentright"},[n("el-input",{staticStyle:{width:"200px"},attrs:{maxlength:"8",placeholder:"请输入短信验证码"},model:{value:t.smsCode,callback:function(e){t.smsCode=e},expression:"smsCode"}}),t._v(" "),n("el-button",{attrs:{disabled:t.iswait},on:{click:t.checkImgCode}},[t._v(t._s(t.iswait?"等待"+t.waittime+"s":"发送验证码"))])],1)]),t._v(" "),n("div",[n("div",{staticClass:"contentleft"},[t._v("新的密码 :")]),t._v(" "),n("div",{staticClass:"contentright"},[n("el-input",{attrs:{maxlength:"15","show-password":"",placeholder:"请输入新的密码"},model:{value:t.new_pass,callback:function(e){t.new_pass=e},expression:"new_pass"}})],1)]),t._v(" "),n("div",[n("div",{staticClass:"contentleft"},[t._v("确认密码 :")]),t._v(" "),n("div",{staticClass:"contentright"},[n("el-input",{attrs:{maxlength:"15","show-password":"",placeholder:"请再次输入密码"},model:{value:t.new_pass_confirmation,callback:function(e){t.new_pass_confirmation=e},expression:"new_pass_confirmation"}})],1)]),t._v(" "),n("div",[n("el-button",{staticStyle:{margin:"30px 71px 0 217px",width:"108px"},attrs:{type:"primary"},on:{click:t.changepassword}},[t._v("保存")])],1)])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"changeheader"},[e("p",{staticClass:"actived"},[this._v("修改登录密码")])])}],!1,null,"0a482a99",null);e.default=component.exports}}]);